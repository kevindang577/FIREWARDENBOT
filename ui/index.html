<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fire Warden Bot - Mission Control</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Status Toast Container - Informative Feedback -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Main UI Container -->
    <div class="ui-container">
        <!-- Header with Mission Status -->
        <header class="header">
            <div class="header-left">
                <h1><i class="fas fa-shield-alt"></i> Fire Warden Bot</h1>
                <div class="mission-status">
                    <span id="mission-status-text">Standby</span>
                    <div class="status-indicator" id="status-indicator"></div>
                </div>
            </div>
            <div class="header-right">
                <button id="emergency-stop" class="emergency-btn">
                    <i class="fas fa-stop"></i> EMERGENCY STOP
                </button>
                <div class="connection-status">
                    <i class="fas fa-wifi" id="connection-icon"></i>
                    <span id="connection-text">Connected</span>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Map/Camera View - Primary Display -->
            <div class="primary-view">
                <div class="view-header">
                    <h3>Mission Area</h3>
                    <div class="view-controls">
                        <button class="btn-secondary" id="toggle-view">
                            <i class="fas fa-camera"></i> Switch to Camera
                        </button>
                        <button class="btn-secondary" id="reset-view">
                            <i class="fas fa-refresh"></i> Reset View
                        </button>
                    </div>
                </div>
                <div class="map-container" id="map-container">
                    <!-- Map/Camera feed will be inserted here -->
                    <div class="placeholder-view">
                        <i class="fas fa-map-marked-alt"></i>
                        <p>Mission Area Map</p>
                        <small>Click to select patrol zones</small>
                    </div>
                </div>
                
                <!-- Zone Selection Overlay -->
                <div id="zone-selection-overlay" class="zone-overlay hidden">
                    <div class="zone-info">
                        <h4>Zone Selection</h4>
                        <p>Selected Area: <span id="selected-area">None</span></p>
                        <div class="zone-actions">
                            <button class="btn-primary" id="confirm-zone">
                                <i class="fas fa-check"></i> Confirm Zone
                            </button>
                            <button class="btn-secondary" id="cancel-zone">
                                <i class="fas fa-times"></i> Cancel
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Side Panel - Mission Parameters & Control -->
            <div class="side-panel">
                <!-- Mission Summary - Reduced Memory Load -->
                <div class="panel-section">
                    <h3><i class="fas fa-clipboard-list"></i> Mission Summary</h3>
                    <div class="mission-params">
                        <div class="param-item">
                            <label>World Environment:</label>
                            <select id="world-select" class="control-input">
                                <option value="simple_trees">Simple Trees</option>
                                <option value="sparse_forest">Sparse Forest</option>
                                <option value="dense_forest">Dense Forest</option>
                                <option value="mixed_terrain">Mixed Terrain</option>
                                <option value="open_meadows">Open Meadows</option>
                                <option value="obstacle_course">Obstacle Course</option>
                                <option value="large_demo">Large Demo</option>
                            </select>
                        </div>
                        <div class="param-item">
                            <label>Mission Type:</label>
                            <select id="mission-type" class="control-input">
                                <option value="patrol">Area Patrol</option>
                                <option value="search">Search & Rescue</option>
                                <option value="monitor">Fire Monitoring</option>
                                <option value="mapping">Area Mapping</option>
                            </select>
                        </div>
                        <div class="param-item">
                            <label>Altitude (m):</label>
                            <input type="number" id="altitude" class="control-input" value="10" min="5" max="50">
                        </div>
                        <div class="param-item">
                            <label>Speed (m/s):</label>
                            <input type="number" id="speed" class="control-input" value="2" min="1" max="10">
                        </div>
                        <div class="param-item">
                            <label>Battery Level:</label>
                            <div class="battery-indicator">
                                <div class="battery-bar" id="battery-bar"></div>
                                <span id="battery-percent">85%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mission Control -->
                <div class="panel-section">
                    <h3><i class="fas fa-play-circle"></i> Mission Control</h3>
                    <div class="control-buttons">
                        <button class="btn-primary btn-large" id="launch-mission">
                            <i class="fas fa-rocket"></i> Launch Mission
                        </button>
                        <button class="btn-secondary" id="pause-mission" disabled>
                            <i class="fas fa-pause"></i> Pause
                        </button>
                        <button class="btn-secondary" id="return-home">
                            <i class="fas fa-home"></i> Return to Base
                        </button>
                        <button class="btn-danger" id="abort-mission">
                            <i class="fas fa-stop-circle"></i> Abort Mission
                        </button>
                    </div>
                </div>

                <!-- Waypoint Management -->
                <div class="panel-section">
                    <h3><i class="fas fa-map-pin"></i> Waypoints</h3>
                    <div class="waypoint-list" id="waypoint-list">
                        <!-- Waypoints will be dynamically added here -->
                        <div class="waypoint-item">
                            <span class="waypoint-name">Home Base</span>
                            <span class="waypoint-coords">(0, 0)</span>
                            <div class="waypoint-status">
                                <i class="fas fa-check-circle status-reached"></i>
                            </div>
                        </div>
                    </div>
                    <button class="btn-secondary btn-small" id="add-waypoint">
                        <i class="fas fa-plus"></i> Add Waypoint
                    </button>
                </div>

                <!-- Session Logs -->
                <div class="panel-section">
                    <h3><i class="fas fa-file-alt"></i> Session Logs</h3>
                    <div class="log-controls">
                        <button class="btn-secondary btn-small" id="start-recording">
                            <i class="fas fa-record-vinyl"></i> Start Recording
                        </button>
                        <button class="btn-secondary btn-small" id="stop-recording" disabled>
                            <i class="fas fa-stop"></i> Stop Recording
                        </button>
                        <button class="btn-secondary btn-small" id="view-logs">
                            <i class="fas fa-eye"></i> View Logs
                        </button>
                    </div>
                    <div class="log-status">
                        <span id="recording-status">Not Recording</span>
                        <div class="recording-indicator" id="recording-indicator"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal - Internal Locus of Control -->
    <div id="confirmation-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Confirm Action</h3>
                <button class="modal-close" id="modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p id="modal-message">Are you sure you want to proceed?</p>
                <div id="modal-details" class="modal-details"></div>
            </div>
            <div class="modal-footer">
                <button class="btn-primary" id="modal-confirm">Confirm</button>
                <button class="btn-secondary" id="modal-cancel">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="ui-controller.js"></script>
    <script src="ros-integration.js"></script>
</body>
</html>
